---
title: "Third Day with Go-Lang"
date: 2020-12-06 21:46
categories: Go-Lang Study
---
## 클로저 (Closure)

Go 언어에서 함수는 Clousre 로 사용될 수도 있다. Closure 는 함수 바깥에 있는 변수를 참조하는 Function Value 를 일컫는데, 이때 함수는 함수 밖의 변수를 마치 함수 안으로 끌어들인 듯 그 변수를 읽고 쓸 수 있게 된다.

아래 예제에서 nextValue() 함수는 int 를 리턴하는 익명함수 (func() int) 를 리턴하는 함수이다. 그런데 여기서 이 익명함수가 함수 바깥에 있는 변수 i 를 참조하고 있다.

예제에서 next := nextValue() 에서 Closure 함수를 next 라는 변수에 할당한 후, 계속 next() 를 3번 호출하는데 이 때마다 Closure 내의 변수 i 는 계속 증가된 값을 갖고 있게 된다. 이는 마치 next 라는 함수값이 변수 i 를 내부에 유지하고 있는 모양새이다. 하지만 anotherNext := nextValue() 같이 새로운 Closure 함수값을 생성한다면, 변수 i 는 초기 0을 갖게 되므로 다시 1부터 카운팅을 하게 된다.

```go
package main

type retVal func() int

func nextValue() retVal {
  i := 0
  return func() int {
    return i++
  }
}

func main() {
  next := nextValue()

  println(next())
  println(next())
  println(next())

  anotherNext := nextValue()
  println(anotherNext())
  println(anotherNext())
}
```

## 컬렉션 - 배열

배열의 선언은 `var 변수명 [배열크기]데이터타입` 의 형태로 이루어진다. Go 에서 배열의 Size 는 Type 을 구성하는 한 요소이다. 따라서 `[3]int` 와 `[5]int` 는 서로 다른 타입으로 인식된다.

```go
package main

func main() {
  var a [3]int
  a[0] = 1
  a[1] = 2
  a[2] = 3
  println(a[1]) // 2 출력
}
```

- 배열의 초기화

배열을 정의할 때 초기값을 설정할 수 있는데, `[배열크기]데이터타입` 뒤에 `{}` 괄호를 두고 초기값을 순서대로 적으면 된다.
  만약 초기화 과정에서 `[...]` 를 사용해 배열크기를 생략하면 자동으로 초기화 요소 숫자만큼 배열 크기가 정해진다.
